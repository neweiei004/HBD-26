<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activities</title>
    <link rel="icon" type="icon" href="/img/logo.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/activity.css">
    <link rel="stylesheet" href="/css/memory-game.css">
    <style>
        /* Difficulty Modal Styles */
        .difficulty-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 2rem 1.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            width: 90%;
            max-width: 380px;
            text-align: center;
            color: white;
            font-family: 'Kanit', sans-serif;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .modal-header {
            margin-bottom: 1.5rem;
        }
        
        .modal-header h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.8rem;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .modal-subtitle {
            margin: 0;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }

        .difficulty-modal h3 {
            margin-top: 0;
            color: #d23669;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .difficulty-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 2rem 0 1.5rem;
        }

        .difficulty-btn {
            position: relative;
            padding: 1.2rem 1.5rem;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: white;
            text-align: left;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .difficulty-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .difficulty-btn:hover::before {
            opacity: 1;
        }
        
        .difficulty-btn:active {
            transform: translateY(2px);
        }

        .difficulty-btn.easy {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }

        .difficulty-btn.normal {
            background: linear-gradient(135deg, #FF9800, #FFC107);
        }

        .difficulty-btn.hard {
            background: linear-gradient(135deg, #F44336, #E91E63);
        }
        
        .difficulty-icon {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            display: inline-block;
        }
        
        .difficulty-name {
            display: block;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.2rem;
        }
        
        .difficulty-desc {
            display: block;
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .difficulty-btn:active {
            transform: translateY(0);
        }

        .difficulty-info {
            margin: 1.5rem 0;
            font-size: 1.1rem;
            color: #555;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 8px 24px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-top: 1rem;
            backdrop-filter: blur(5px);
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .close-btn:hover {
            background: #a51d4a;
            transform: translateY(-2px);
        }

        
        /* Make sure the modal is on top of other content */
        #difficultyOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1500;
        }
        
        /* Responsive adjustments */
        @media (max-width: 480px) {
            .difficulty-modal {
                width: 90%;
                padding: 1.8rem 1.2rem;
                border-radius: 15px;
            }
            
            .modal-header h3 {
                font-size: 1.5rem;
            }
            
            .difficulty-btn {
                padding: 1rem 1.2rem;
                border-radius: 12px;
            }
            
            .difficulty-icon {
                font-size: 1.5rem;
            }
            
            .difficulty-name {
                font-size: 1.2rem;
            }
            
            .difficulty-desc {
                font-size: 0.85rem;
            }
        }
    </style>
    <script>
        // Check if user is coming directly to activity.html without going through login
        if (!sessionStorage.getItem('authenticated')) {
            window.location.href = '/login.html';
        }
    </script>
</head>
<body>
    <!-- Background Music -->
    <audio id="backgroundMusic" src="/music/bg.mp3" loop></audio>

    <script>
        // Set up background music
        const backgroundMusic = document.getElementById('backgroundMusic');
        backgroundMusic.volume = 0.20; // Set volume to 20%
        backgroundMusic.play(); // Start playing the music
    </script>

    <div class="nav-menu"> 
        <ul>
            <li><a href="/index.html">Home üè†</a></li>
            <li><a href="/activity.html" class="active">Activity üïπÔ∏èüéÆ</a></li>
        </ul>
    </div>

    <div class="main-content-area">
        <div class="activity-container">
            <h1 class="activity-title">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° üéÆ</h1>
            
            <div class="activity-grid">
                <div class="activity-card" id="memoryGameCard" style="cursor: pointer;">
                    <div class="activity-icon">üÉè</div>
                    <h2 class="activity-name">‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏†‡∏≤‡∏û</h2>
                    <p class="activity-description">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡πÅ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç</p>
                </div>

                <div class="activity-card" id="dailyCheckinCard">
                    <div class="activity-icon">üé´</div>
                    <h2 class="activity-name">Daily Check-In</h2>
                    <p class="activity-description">‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</p>
                </div>

                <div class="activity-card">
                    <div class="activity-icon">üéµ</div>
                    <h2 class="activity-name">Music Session</h2>
                    <p class="activity-description">‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô</p>
                </div>

                <div class="activity-card">
                    <div class="activity-icon">üé®</div>
                    <h2 class="activity-name">Creative Time</h2>
                    <p class="activity-description">‡∏°‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô! ‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏™‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÜ ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô</p>
                </div>

                <div class="activity-card">
                    <div class="activity-icon">üìö</div>
                    <h2 class="activity-name">Story Time</h2>
                    <p class="activity-description">‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß ‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏á</p>
                </div>

                <div class="activity-card">
                    <div class="activity-icon">üç≥</div>
                    <h2 class="activity-name">Cooking Fun</h2>
                    <p class="activity-description">‡∏°‡∏≤‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÜ ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô! ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Overlay: Dims the background when popup is active -->
    <div class="popup-overlay" id="checkinOverlay"></div>

    <!-- Daily Check-in Popup: Main container for the popup -->
    <div class="daily-checkin-popup" id="checkinPopup">
        <!-- Popup Header: Contains title and close button -->
        <div class="popup-header">
            <h3 class="popup-title">Daily Check-In Reward ‚ú®</h3>
            <span class="popup-close" id="closeCheckinPopup">&times;</span>
        </div>
        <!-- Popup Main Content: Area for reward details -->
        <div class="popup-main-content">
            <!-- Current Reward Details: Specific content for the day's reward -->
            <div class="current-reward-details">
                <p>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö!</p>
                <p>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö <span class="reward-highlight">[‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç]</span> ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•!</p>
                <img src="/img/gift.png" alt="Reward Gift" class="reward-image">
                <button class="popup-button">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
            </div>
        </div>
        <!-- Popup Footer: Additional info or message area -->
        <div class="popup-footer">
            <p>‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </div>
    </div>

    <script src="/js/memory-game-new.js"></script>
    <!-- Memory Game Difficulty Modal -->
    <div class="popup-overlay" id="difficultyOverlay"></div>
    <div class="difficulty-modal" id="difficultyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</h3>
                <p class="modal-subtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</p>
            </div>
            <div class="difficulty-options">
                <button class="difficulty-btn easy" data-difficulty="easy">
                    <span class="difficulty-icon">üòä</span>
                    <span class="difficulty-name">‡∏á‡πà‡∏≤‡∏¢</span>
                    <span class="difficulty-desc">3 ‡∏ô‡∏≤‡∏ó‡∏µ | 6 ‡∏Ñ‡∏π‡πà</span>
                </button>
                <button class="difficulty-btn normal" data-difficulty="normal">
                    <span class="difficulty-icon">üòé</span>
                    <span class="difficulty-name">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
                    <span class="difficulty-desc">2 ‡∏ô‡∏≤‡∏ó‡∏µ | 8 ‡∏Ñ‡∏π‡πà</span>
                </button>
                <button class="difficulty-btn hard" data-difficulty="hard">
                    <span class="difficulty-icon">üî•</span>
                    <span class="difficulty-name">‡∏¢‡∏≤‡∏Å</span>
                    <span class="difficulty-desc">1 ‡∏ô‡∏≤‡∏ó‡∏µ | 10 ‡∏Ñ‡∏π‡πà</span>
                </button>
            </div>
            <div class="difficulty-info">
                <p id="difficultyDescription">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</p>
            </div>
            <button class="close-btn" id="closeDifficultyModal">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <script>
        // --- Popup Interaction Logic ---

        // Get references to popup elements
        const checkinCard = document.getElementById('dailyCheckinCard');
        const memoryGameCard = document.getElementById('memoryGameCard');
        const difficultyModal = document.getElementById('difficultyModal');
        const difficultyOverlay = document.getElementById('difficultyOverlay');
        const closeDifficultyModal = document.getElementById('closeDifficultyModal');
        const difficultyDescription = document.getElementById('difficultyDescription');
        
        // Difficulty settings
        const difficultySettings = {
            easy: {
                name: '‡∏á‡πà‡∏≤‡∏¢',
                description: '‡πÄ‡∏ß‡∏•‡∏≤ 3 ‡∏ô‡∏≤‡∏ó‡∏µ',
                timeLimit: 180, // 3 minutes in seconds
                pairs: 6
            },
            normal: {
                name: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                description: '‡πÄ‡∏ß‡∏•‡∏≤ 2 ‡∏ô‡∏≤‡∏ó‡∏µ',
                timeLimit: 120, // 2 minutes in seconds
                pairs: 8
            },
            hard: {
                name: '‡∏¢‡∏≤‡∏Å',
                description: '‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏ô‡∏≤‡∏ó‡∏µ',
                timeLimit: 60, // 1 minute in seconds
                pairs: 10
            }
        };
        
        // Show difficulty modal
        function showDifficultyModal() {
            difficultyModal.style.display = 'block';
            difficultyOverlay.style.display = 'block';
        }
        
        // Hide difficulty modal
        function hideDifficultyModal() {
            difficultyModal.style.display = 'none';
            difficultyOverlay.style.display = 'none';
        }
        
        // Handle difficulty selection
        document.querySelectorAll('.difficulty-btn').forEach(button => {
            button.addEventListener('click', function() {
                const difficulty = this.dataset.difficulty;
                const settings = difficultySettings[difficulty];
                difficultyDescription.textContent = `‡∏£‡∏∞‡∏î‡∏±‡∏ö ${settings.name}: ${settings.description}`;
                
                // Start game with selected difficulty
                startMemoryGame(settings);
                hideDifficultyModal();
            });
        });
        
        // Start game with selected difficulty
        function startMemoryGame(settings) {
            // Add loading state
            const originalText = memoryGameCard.innerHTML;
            memoryGameCard.innerHTML = '<div style="margin: 20px 0; font-size: 1.2rem;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Å‡∏°...</div>';
            
            // Initialize memory game with difficulty settings after a short delay
            setTimeout(() => {
                if (window.initializeMemoryGame) {
                    window.initializeMemoryGame(settings);
                } else {
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Å‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                    memoryGameCard.innerHTML = originalText;
                }
            }, 500);
        }
        
        // Close modal when clicking close button or overlay
        closeDifficultyModal.addEventListener('click', hideDifficultyModal);
        difficultyOverlay.addEventListener('click', hideDifficultyModal);
        
        // Show difficulty modal when memory game card is clicked
        if (memoryGameCard) {
            memoryGameCard.addEventListener('click', showDifficultyModal);
        }
        
        const checkinPopup = document.getElementById('checkinPopup');
        const checkinOverlay = document.getElementById('checkinOverlay');
        const closeCheckinPopup = document.getElementById('closeCheckinPopup');
        const popupAcknowledgeButton = checkinPopup.querySelector('.popup-button');

        // Memory game card click handler
        if (memoryGameCard) {
            memoryGameCard.addEventListener('click', (e) => {
                e.preventDefault();
                // Show the mobile-friendly modal for all devices
                showDifficultyModal();
            });
        }

        // Function to show the popup and overlay
        function showCheckinPopup() {
            checkinPopup.classList.add('show');
            checkinOverlay.classList.add('show');
        }

        // Function to hide the popup and overlay
        function hideCheckinPopup() {
            checkinPopup.classList.remove('show');
            checkinOverlay.classList.remove('show');
        }

        // --- Event Listeners ---

        // Show popup when the check-in card is clicked
        if (checkinCard) {
            checkinCard.addEventListener('click', showCheckinPopup);
        }
        // Hide popup when the close button is clicked
        if (closeCheckinPopup) {
            closeCheckinPopup.addEventListener('click', hideCheckinPopup);
        }
        // Hide popup when the overlay is clicked
        if (checkinOverlay) {
            checkinOverlay.addEventListener('click', hideCheckinPopup);
        }
        // Hide popup when the acknowledge button is clicked
        if (popupAcknowledgeButton) {
            popupAcknowledgeButton.addEventListener('click', hideCheckinPopup);
        }
    </script>
</body>
</html>